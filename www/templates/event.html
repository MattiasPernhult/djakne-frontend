<ion-view view-title="Event">
  <!-- Head bar -->
  <ion-nav-bar class="bar-dark">
    <ion-nav-buttons side="left">
      <button class=" button button-icon ion-ios-arrow-left" ui-sref="tab.home"></button>
    </ion-nav-buttons>
    <ion-nav-buttons side="right">
    </ion-nav-buttons>
  </ion-nav-bar>
  <!-- Page content -->
  â€‹

  <ion-content class="has-header">
    <div ng-style="{'padding': '10px'}">
      <div style="margin-bottom:0 !important;" class="item-header">
        <div style="width:20% !important" class="eventBox">
          <p style="margin:0;padding-top:12px !important;padding-bottom:11px;!important" id="bookingDay" class="bookingsDate">{{currentEvent.date | date : 'd'}}</p>
          <p id="bookingMonth" class="bookingsDate">{{currentEvent.date | date : 'MMM'}}</p>
        </div>
        <div id="eventDesc">
          <h3 style="padding: 10px 0; font-size: 25px !important;">{{currentEvent.title}}</h3>
        </div>
      </div>

      <div class="newEvents">
        <div class="list">
          <p style="padding: 0 5px; border-bottom: 1px solid #ddd; padding-bottom: 10px;" class="infoText"><strong>Time: </strong>
            <br>{{currentEvent.date | date:'h:mma'}}</p>
          <p style="padding: 10px 5px; border-bottom: 1px solid #ddd;" class="infoText"><strong>Location: </strong>
            <br>{{currentEvent.location}}</p>
          <p style="padding: 10px 5px;"><strong>Description: </strong>
            <br>{{currentEvent.text}}</p>
        </div>

          <div class="text-center">

            <button ng-if="currentEvent.attendantsId !== user.id" class="button button-outline button-grey" ng-style="{'text-align': 'center', 'border-color': '#444', 'color': '#444'}" ng-click="showing = !showing; signUp(currentEvent._id)">
              SIGN UP
            </button>
          </div>
          <button id="removeEvent" ng-if="currentEvent.author == user.id" ng-style="{'float': 'right'}" ng-click="showConfirmDeleteEvent(currentEvent._id)" class="button button-small button-outline button-dark">
            REMOVE EVENT
          </button>
          <div id="attendants">
            <h4 style="margin-bottom:2px;" id="attending">Attending:</h4>
            <img style="width: 35px;" ng-repeat="attendant in currentEvent.attendants" ng-click="openModal(attendant)" id="attendImg" ng-src="data:image/gif;base64,{{attendant.image}}" ng-if="attendant.image != false" </img>
          </div>

          <!-- Event comments -->
          <div ng-style="{'margin-bottom': '15px'}">
            <div>
              <h5 id="comment">{{currentEvent['comments'].length}}  |  COMMENTS</h5>
            </div>
            <div id="comments" ng-style="{'min-height':'auto'}">
              <div class="row" ng-repeat="comment in currentEvent.comments | limitTo:quantity" ng-style="{'padding-left':'0'}">
                <div class="col col-90" ng-style="{'padding-left':'0'}">
                  <img class="imgCom" ng-src="data:image/gif;base64,{{comment.userImage}}" ng-if="attendant.image != false" </img>
                  <div class="contentComment">
                    <h5 class="userTitle"><b>{{comment.firstName}} {{comment.lastName}}</b></h5>
                    <p class="userComment">{{comment.comment}}</p>
                  </div>
                </div>
                <div class="col">
                  <button ng-if="user.id == comment.memberId" ng-style="{'float': 'right', 'margin-top':'10px'}" ng-click="showConfirmDeleteComment(currentEvent._id, comment._id)" class="button button-small button-outline button-dark">X</button>
                </div>
              </div>
              <p class="showComment" ng-click="showMore()" ng-show="commentQty > 3 && showAll === false">Show more</p>
              <p class="showComment" ng-click="hide()" ng-show="showAll">Show less</p>
            </div>
            <!-- Comment input container -->
            <div ng-style="{'margin-top': '10px'}">
              <img class="commentImg" ng-src="data:image/jpeg;base64,{{user.image}} "></img>
              <input ng-model="userComment.text" class="commentContent" type="text" placeholder="Write your comment here..">
              <!-- User input -->
              <button ng-style="{'margin-top': '10px','margin-bottom': '15px','margin-right': '5px'}" ng-click="addComment(currentEvent._id); $event.stopPropagation()" ng-disabled="!userComment.text" class=" addComment button-small button-dark button button-outline"> ADD COMMENT </button>
              </input>
            </div>
            </div>


        <script id="modal.html" type="text/ng-template">
          <ion-modal-view>
            <ion-header-bar class="bar-dark">
              <button class="button button-icon ion-ios-arrow-left" ng-click="closeModal()"></button>
              <h1 class="title">Member</h1>
            </ion-header-bar>
            <ion-content>
              <div class="hero text-center" style="background: #444">
                <div class="content">
                  <img class="avatar" ng-src="data:image/jpeg;base64,{{member.image}}"></img>
                  <p><a id="profileTitle">{{member.firstName}} {{member.lastName}}</a></p>
                </div>
              </div>
              <div class="list">
                <label class="item item-stacked-label" ng-style="{ 'box-shadow':'none', 'border-bottom': '1px solid lightgrey' }">
                  <span>Work</span>
                  <p>{{member.headline | limitTo:45}}</p>
                </label>
                <label class="item item-stacked-label" ng-style="{ 'box-shadow':'none', 'border-bottom': '1px solid lightgrey' }">
                  <span>Interests</span>
                  <p>{{member.interests}}</p>
                  <p ng-show="member.interests.length === 0">None given.</p>
                </label>
                <label class="item item-stacked-label" ng-style="{ 'box-shadow':'none', 'border-bottom': '1px solid lightgrey' }">
                  <span>Lives</span>
                  <p>{{member.location}}</p>
                </label>
              </div>
            </ion-content>
          </ion-modal-view>
        </script>


  </ion-content>
</ion-view>
